<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スロット稼働・期待値管理ツール</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- モバイルナビゲーションメニュー -->
    <nav class="mobile-nav">
        <button class="menu-toggle" id="menuToggle" aria-label="メニュー">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="menu-overlay" id="menuOverlay"></div>
        <div class="menu-panel" id="menuPanel">
            <div class="menu-header">
                <h3>メニュー</h3>
                <button class="menu-close" id="menuClose">×</button>
            </div>
            <ul class="menu-list">
                <li><a href="#" class="menu-item active" data-section="home">🏠 ホーム</a></li>
                <li><a href="#" class="menu-item" data-section="calendar">📅 カレンダー</a></li>
                <li><a href="#" class="menu-item" data-section="stats">📊 統計・グラフ</a></li>
                <li><a href="#" class="menu-item" data-section="import">📥 データインポート</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- ホームセクション -->
        <section id="homeSection" class="page-section active">
            <header>
                <h1>絶対に負けられないスロット</h1>
                <p>打つスロットの情報を入力してください</p>
            </header>

            <!-- スロット情報入力フォーム -->
            <div class="form-section">
                <h2>スロット情報入力</h2>
                <form id="registerForm">
                <div class="form-group">
                    <label for="name">機種名</label>
                    <select id="name" required class="input-field">
                        <option value="">機種を選択してください</option>
                    </select>
                    <p class="form-hint" id="nameHint"></p>
                </div>
                <div class="form-group">
                    <label for="target">狙い目</label>
                    <select id="target" required class="input-field">
                        <option value="">狙い目を選択してください</option>
                    </select>
                    <p class="form-hint" id="targetHint"></p>
                </div>
                <div class="form-group">
                    <label for="game">ゲーム数</label>
                    <select id="game" required class="input-field">
                        <option value="">ゲーム数を選択してください</option>
                    </select>
                    <p class="form-hint" id="gameHint"></p>
                </div>
                <div class="form-group" id="differenceGroup" style="display: none;">
                    <label for="difference">差枚数</label>
                    <select id="difference" class="input-field">
                        <option value="">差枚数を選択してください</option>
                        <option value="BIG後">BIG後</option>
                        <option value="300枚以下後">300枚以下後</option>
                        <option value="600-1000枚後">600-1000枚後</option>
                        <option value="1000-1500枚後">1000-1500枚後</option>
                        <option value="1500-2000枚後">1500-2000枚後</option>
                        <option value="2000-2500枚後">2000-2500枚後</option>
                        <option value="2500枚以上後">2500枚以上後</option>
                    </select>
                    <p class="form-hint" id="differenceHint"></p>
                </div>
                <div class="form-group" id="rbczGroup" style="display: none;">
                    <label for="rbCount">RB回数</label>
                    <input type="number" id="rbCount" class="input-field" min="0" placeholder="RB回数を入力">
                    <p class="form-hint" id="rbHint"></p>
                </div>
                <div class="form-group" id="czGroup" style="display: none;">
                    <label for="czCount">CZ回数</label>
                    <input type="number" id="czCount" class="input-field" min="0" placeholder="CZ回数を入力">
                    <p class="form-hint" id="czHint"></p>
                </div>
                <div class="form-group">
                    <label for="expect">期待値</label>
                    <div style="position: relative; display: flex; align-items: center;">
                        <input type="number" id="expect" readonly step="0.01" placeholder="機種・狙い目・ゲーム数を選択すると自動表示" class="input-field readonly" style="padding-right: 40px;">
                        <span id="expectCurrency" style="position: absolute; right: 15px; color: var(--text-secondary); pointer-events: none; display: none;">円</span>
                    </div>
                    <div id="expectDetails" style="display: none; margin-top: 8px; padding: 8px; background: rgba(255, 255, 255, 0.05); border-radius: 6px; font-size: 0.9em;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <span style="color: var(--text-secondary);">50貸/50交換:</span>
                            <span id="expect50" style="color: var(--text-primary); font-weight: 500;"></span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">460枚 46-52:</span>
                            <span id="expect460" style="color: var(--text-primary); font-weight: 500;"></span>
                        </div>
                    </div>
                    <p class="form-hint" id="expectHint"></p>
                </div>
                <div class="form-group">
                    <label for="income">実際の収支</label>
                    <input type="number" id="income" required step="0.01" placeholder="例: -3000 (マイナス可)" class="input-field">
                </div>
                <button type="submit" class="btn-primary">登録</button>
                </form>
            </div>
        </section>

        <!-- カレンダーセクション -->
        <section id="calendarSection" class="page-section">
            <header>
                <h1>📅 カレンダー</h1>
                <p>日ごとの収支をカレンダーで確認</p>
            </header>
            <div class="calendar-container">
                <div class="calendar-controls">
                    <button id="prevMonth" class="btn-secondary">← 前月</button>
                    <div class="calendar-month" id="calendarMonth"></div>
                    <button id="nextMonth" class="btn-secondary">翌月 →</button>
                </div>
                <div id="calendar" class="calendar"></div>
            </div>
            <div id="dailyStats" class="daily-stats"></div>
        </section>

        <!-- 統計セクション -->
        <section id="statsSection" class="page-section">
            <header>
                <h1>📊 統計・グラフ</h1>
                <p>収支の推移と統計情報</p>
            </header>
            <div class="stats-container">
                <div class="stats-grid" id="statsGrid"></div>
                <div id="chartContainer" class="chart-container"></div>
            </div>
        </section>

        <!-- データインポートセクション -->
        <section id="importSection" class="page-section">
            <header>
                <h1>📥 データインポート</h1>
                <p>台データを一括登録</p>
            </header>
            <div class="import-container">
                <div class="import-instructions">
                    <h3>データ形式</h3>
                    <p>以下のいずれかの形式でデータを準備してください：</p>
                    <div class="format-examples">
                        <div class="format-item">
                            <h4>📄 CSV形式（推奨）</h4>
                            <pre class="code-block">機種名,狙い目,ゲーム数,期待値
北斗の拳,ボーナス狙い,1000,5000
北斗の拳,ボーナス狙い,2000,10000
北斗の拳,ART狙い,1000,3000</pre>
                        </div>
                        <div class="format-item">
                            <h4>📋 JSON形式</h4>
                            <pre class="code-block">[
  {
    "machineName": "北斗の拳",
    "target": "ボーナス狙い",
    "game": 1000,
    "expect": 5000
  },
  {
    "machineName": "北斗の拳",
    "target": "ボーナス狙い",
    "game": 2000,
    "expect": 10000
  }
]</pre>
                        </div>
                    </div>
                </div>
                <div class="import-form">
                    <h3>データを貼り付けてインポート</h3>
                    <textarea 
                        id="importData" 
                        class="import-textarea" 
                        placeholder="CSVまたはJSON形式のデータを貼り付けてください"
                        rows="10"
                    ></textarea>
                    <div class="import-buttons">
                        <button id="importBtn" class="btn-primary">インポート</button>
                        <button id="clearImportBtn" class="btn-secondary">クリア</button>
                    </div>
                    <div id="importResult" class="import-result"></div>
                </div>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>

